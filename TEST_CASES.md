# Tab PowerToy - 测试用例文档

## 1. 功能测试

### 1.1 基本功能测试

| 测试ID | 测试项 | 测试步骤 | 预期结果 | 通过标准 |
|--------|--------|----------|----------|----------|
| F-001 | 插件图标点击 | 1. 在Chrome浏览器中安装插件<br>2. 点击工具栏中的插件图标 | 弹出包含输入框和确定按钮的窗口 | 弹窗正常显示，包含标题、输入框和确定按钮 |
| F-002 | 标题修改功能 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 在输入框中输入"测试标题"<br>4. 点击确定按钮 | 当前标签页的标题变为"测试标题" | 标签页标题成功修改为输入的文本 |
| F-003 | Enter键提交 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 在输入框中输入"测试标题2"<br>4. 按下Enter键 | 当前标签页的标题变为"测试标题2" | 标签页标题成功修改为输入的文本 |
| F-004 | 空输入验证 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 不输入任何内容<br>4. 点击确定按钮 | 不执行标题修改操作 | 标签页标题保持不变 |
| F-005 | 成功提示显示 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 输入新标题<br>4. 点击确定按钮 | 显示"标题已修改！"的成功提示 | 成功提示文本显示在弹窗底部 |
| F-006 | 自动关闭功能 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 输入新标题<br>4. 点击确定按钮 | 显示成功提示后，弹窗在2秒内自动关闭 | 弹窗在显示成功提示后自动关闭 |
| F-006.1 | 默认标题展示 | 1. 打开任意网页<br>2. 点击插件图标 | 标题输入框的文本为当前网页`document.title` | 输入框初始值与当前网页标题一致 |
| F-007 | URL图标修改 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 在favicon输入框中输入有效图片URL<br>4. 点击"修改图标"按钮 | 当前标签页的favicon变为指定图片 | 标签页favicon成功修改为指定图片 |
| F-008 | Emoji图标修改 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 从emoji列表中选择一个表情<br>4. 点击"修改图标"按钮 | 当前标签页的favicon变为选择的emoji | 标签页favicon成功修改为选择的emoji |
| F-008.1 | 自定义Emoji输入 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 在favicon输入框直接输入emoji（例如：🔔）<br>4. 点击"修改图标"按钮 | 当前标签页的favicon变为输入的emoji渲染图标 | 标签页favicon成功显示输入emoji的渲染结果 |
| F-009 | Favicon修改成功提示 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 修改favicon<br>4. 点击"修改图标"按钮 | 显示"图标已修改！"的成功提示 | 成功提示文本显示在弹窗底部 |
| F-010 | 恢复默认标题 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 修改标题<br>4. 点击"恢复默认标题"按钮 | 当前标签页的标题恢复为原始标题 | 标签页标题成功恢复为原始标题 |
| F-011 | 恢复默认图标 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 修改favicon<br>4. 点击"恢复默认图标"按钮 | 当前标签页的favicon恢复为原始图标 | 标签页favicon成功恢复为原始图标 |
| F-018 | 右键选中文本修改标题 | 1. 打开任意网页<br>2. 选中一段文本<br>3. 点击右键选择“设为标签页标题” | 当前标签页的标题变为选中的文本 | 标题成功修改为选中的文本，无报错 |

### 1.3 最近标签页切换功能测试

| 测试ID | 测试项 | 测试步骤 | 预期结果 | 通过标准 |
|--------|--------|----------|----------|----------|
| F-012 | 快捷键切换面板 | 1. 打开多个网页<br>2. 按下 Alt+Q (或自定义快捷键)<br>3. 保持按住 Alt | 屏幕中央显示标签页切换面板，列出最近使用的标签页 | 面板UI正常显示，无样式错乱，置顶于网页内容之上 |
| F-012.1 | 列表顺序 (MRU) | 1. 依次访问页面 A, B, C<br>2. 在 C 页面呼出面板 | 列表顺序应为 C, B, A... | 列表严格按照最近使用顺序排列，无跳跃 |
| F-012.2 | 键盘导航 | 1. 呼出面板 (按住 Alt)<br>2. 按 Q 键 | 选中项向下移动，高亮显示 | 高亮跟随按键正确移动，循环滚动 |
| F-012.3 | 松开切换 | 1. 呼出面板并选中目标<br>2. 松开 Alt 键 | 面板关闭，浏览器切换到目标标签页 | 切换动作迅速，无明显延迟 |
| F-012.4 | 分组显示 | 1. 将某标签页加入 Chrome 分组（设置颜色）<br>2. 呼出面板 | 该标签页左侧显示带背景色的分组名称胶囊 | 分组名称正确，背景色与 Chrome 分组一致，无圆点 |
| F-012.5 | 平台适配提示 | 1. 在 Mac 和 Windows 上分别测试 (或模拟)<br>2. 观察面板顶部提示 | Mac 显示 "Option+Q" (或 Control/Command)，Windows 显示 "Alt+Q" | 提示文案与当前系统和实际快捷键设置一致 |
| F-013 | 快捷键自定义 | 1. 打开 chrome://extensions/<br>2. 点击"键盘快捷键"<br>3. 修改快捷键<br>4. 使用新快捷键测试 | 新快捷键能够呼出面板，面板提示更新 | 自定义快捷键生效，UI 提示同步更新 |
| F-014 | 单标签页处理 | 1. 只打开1个标签页<br>2. 按下快捷键 | 面板显示，但只有一个选项（或不执行切换） | 系统稳定，不崩溃 |
| F-015 | 内部页面过滤 | 1. 在 chrome://settings/ 页面按下快捷键 | 尝试切换到最近的普通页面 (盲切) 或显示面板 | 在受限页面也能通过 fallback 机制工作 |
| F-016 | 缺省图标显示 | 1. 打开新标签页 (chrome://newtab) 或无图标页面<br>2. 呼出面板 | 列表中该页面的图标显示为 📄 Emoji | 当无法获取 favicon 或加载失败时，自动回退显示默认 Emoji |
| F-017 | 调试日志导出 | 1. 点击插件图标打开 Popup<br>2. 点击 "Copy Debug Logs"<br>3. 粘贴到文本编辑器 | 剪贴板包含详细的后台和 Content Script 日志 | 日志包含时间戳、事件类型 (keyup, alt_released) |

### 1.2 用户体验测试

| 测试ID | 测试项 | 测试步骤 | 预期结果 | 通过标准 |
|--------|--------|----------|----------|----------|
| U-001 | 输入框自动聚焦 | 1. 打开任意网页<br>2. 点击插件图标 | 输入框自动获得焦点，光标在输入框内闪烁 | 弹窗打开后无需点击，即可直接输入 |
| U-002 | 按钮悬停效果 | 1. 打开任意网页<br>2. 点击插件图标<br>3. 将鼠标悬停在确定按钮上 | 按钮颜色变深，提供视觉反馈 | 按钮在鼠标悬停时有明显的样式变化 |
| U-003 | 弹窗尺寸适当 | 1. 打开任意网页<br>2. 点击插件图标 | 弹窗宽度约为300px，高度适应内容 | 弹窗尺寸合适，不会过大或过小 |

## 2. 兼容性测试

| 测试ID | 测试项 | 测试步骤 | 预期结果 | 通过标准 |
|--------|--------|----------|----------|----------|
| C-001 | Chrome最新版本 | 在Chrome最新版本中安装并测试插件 | 插件正常工作，所有功能正常 | 所有基本功能测试用例通过 |
| C-002 | 不同操作系统 | 在Windows、macOS和Linux系统的Chrome浏览器中测试 | 插件在各操作系统上正常工作 | 所有基本功能测试用例在各系统上通过 |
| C-003 | 不同网页类型 | 在普通网页、SPA应用、iframe嵌套页面等不同类型网页上测试 | 插件在各类网页上正常工作 | 标题修改功能在各类网页上正常生效 |

## 3. 安全性测试

| 测试ID | 测试项 | 测试步骤 | 预期结果 | 通过标准 |
|--------|--------|----------|----------|----------|
| S-001 | 权限最小化 | 检查manifest.json中的权限声明 | 仅包含"activeTab"、"scripting"和"tabs"权限 | 不包含不必要的权限 |
| S-002 | 输入安全处理 | 输入包含特殊字符的标题（如HTML标签、JavaScript代码等） | 特殊字符被正确处理，不导致安全问题 | 特殊字符不会被执行为代码 |
| S-003 | 后台脚本安全 | 检查background.js中的错误处理 | 所有异步操作都有try-catch保护 | 不会因未捕获错误导致脚本崩溃 |
| S-004 | 标签页权限安全 | 检查标签页历史记录处理 | 只记录普通网页，不记录敏感页面 | 不会记录chrome://等内部页面历史 |

## 4. 性能测试

| 测试ID | 测试项 | 测试步骤 | 预期结果 | 通过标准 |
|--------|--------|----------|----------|----------|
| P-001 | 弹窗响应时间 | 点击插件图标，测量弹窗显示时间 | 弹窗在500ms内显示 | 弹窗显示时间不超过500ms |
| P-002 | 标题修改响应时间 | 点击确定按钮，测量标题修改完成时间 | 标题在1秒内完成修改 | 标题修改时间不超过1秒 |
| P-003 | 标签页切换响应时间 | 按下 Alt+Q 快捷键，测量切换完成时间 | 标签页在500ms内完成切换 | 切换时间不超过500ms |
| P-004 | 后台脚本稳定性 | 长时间使用插件（1小时以上） | 快捷键功能持续可用 | 不会出现功能失效的情况 |

## 5. 测试结果汇总

| 测试类别 | 通过数量 | 失败数量 | 未测试数量 | 通过率 |
|----------|----------|----------|------------|--------|
| 基本功能测试 | - | - | - | - |
| 用户体验测试 | - | - | - | - |
| 兼容性测试 | - | - | - | - |
| 安全性测试 | - | - | - | - |
| 性能测试 | - | - | - | - |
| **总计** | - | - | - | - |

## 6. 代码与文档符合性评估

| 评估项 | 符合情况 | 备注 |
|--------|----------|------|
| manifest.json与PRD要求一致 | ✅ | 包含了所有必要的配置和权限 |
| popup.html实现了UI要求 | ✅ | 包含了所有必要的UI元素和样式 |
| popup.js实现了功能需求 | ✅ | 实现了标题修改、键盘支持和自动关闭等功能 |
| 图标文件符合要求 | ✅ | 提供了不同尺寸的SVG图标 |
| 代码风格与最佳实践 | ✅ | 代码结构清晰，注释充分 |
| 后台脚本稳定性 | ✅ | 添加了Service Worker生命周期管理 |
| 错误处理完整性 | ✅ | 所有异步操作都有try-catch保护 |
| 调试工具支持 | ✅ | 提供了调试面板和诊断工具 |