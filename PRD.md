# Tab PowerToy - 产品需求文档(PRD)

## 1. 产品概述

### 1.1 产品定义
Tab PowerToy是一款Chrome浏览器插件，允许用户快速修改当前标签页的标题，满足用户对浏览器标签页个性化管理的需求。

### 1.2 产品价值
- 提高工作效率：用户可以根据内容给标签页设置更有意义的标题，便于识别和管理
- 增强浏览体验：为用户提供个性化的浏览器使用体验
- 解决问题：解决默认网页标题不直观或过长的问题

## 2. 功能需求

### 2.1 核心功能
用户可以通过点击插件图标，在弹出的输入框中输入新的标题文本，然后点击确定按钮或按Enter键，将当前标签页的标题修改为输入的文本。用户还可以修改当前标签页的favicon（网站图标）。
此外，用户还可以通过右键菜单将网页上选中的文本直接设置为标签页标题。

### 2.2 功能详情
1. **插件图标点击**
   - 用户点击Chrome工具栏中的插件图标
   - 系统弹出一个包含标题输入框、favicon输入框、emoji选择列表和确定按钮的窗口

2. **右键菜单快捷设置**
   - 用户在网页上选中一段文本
   - 点击右键，菜单中出现“设为标签页标题”选项
   - 点击该选项，当前标签页标题立即变为选中文本

3. **标题输入**
   - 用户在输入框中输入新的标题文本
   - 输入框自动获取焦点，方便用户直接输入
   - 打开插件面板时，系统自动读取当前标签页标题并填充到输入框，作为缺省文本，便于用户直接微调

3. **Favicon修改**
   - 用户可以在favicon输入框中输入图标URL
   - 或者从预设的emoji列表中选择一个作为网站图标
   - 点击"修改图标"按钮应用更改

4. **恢复默认设置**
   - 用户可以点击"恢复默认标题"按钮恢复网页原始标题
   - 用户可以点击"恢复默认图标"按钮恢复网页原始图标
   - 系统会保存原始值以便恢复

5. **确认修改**
   - 用户点击"确定"按钮或按Enter键提交标题修改
   - 系统将当前标签页的标题修改为用户输入的文本
   - 显示成功提示，2秒后自动关闭弹窗

### 2.4 最近标签页切换 (PowerToy Switcher)
1. **快捷键触发**
   - 默认快捷键：`Alt+Q` (Windows/Linux) 或 `Option+Q` (macOS)
   - 支持在 Chrome 扩展管理页面自定义快捷键
   - 支持检测多种修饰键释放 (Alt, Control, Meta/Command)

2. **交互流程**
   - **按下快捷键**：立即显示覆盖全屏的切换面板
   - **保持按住修饰键**：面板保持显示，再次按 `Q` (或主键) 向下选择列表中的下一个标签页
   - **松开修饰键**：立即切换到当前选中的标签页，并关闭面板
   - **鼠标点击**：用户也可以直接点击面板中的标签页项进行切换
   - **点击遮罩**：点击面板外部区域关闭面板，不进行切换

3. **界面设计**
   - **Shadow DOM 隔离**：使用 Shadow DOM 确保样式不被宿主网页影响
   - **列表排序**：严格按照“最近使用 (MRU)”顺序排列，当前标签页排第一，上一个标签页排第二，依此类推
   - **分组展示**：对于属于 Chrome 分组的标签页，在左侧显示带有背景色的分组名称胶囊 (Badge)，不显示圆点，保持列表整洁
   - **图标显示**：显示网站 Favicon，当无法获取或加载失败时，自动显示默认的 📄 图标
   - **快捷键提示**：面板顶部根据当前操作系统智能显示快捷键提示 (如 macOS 显示 "Option + Q")
   - **视觉反馈**：选中项高亮，滚动条美化

4. **搜索与筛选**
   - **快速激活**：支持按下 `/` 键激活搜索框
   - **实时筛选**：输入内容实时过滤标签页标题和URL
   - **ESC 交互**：搜索框聚焦时按下 ESC 仅退出聚焦；未聚焦时按下 ESC 关闭面板
   - **自动聚焦**：在非快捷键模式下（如 Launcher 模式），支持直接输入字符自动聚焦搜索框

5. **调试模式**
   - 在 Popup 界面提供 "Debug Mode" 入口
   - 支持将后台日志导出到剪贴板，方便排查问题
   - 支持在面板中显示错误信息

### 2.5 用户交互流程
1. 用户打开需要修改标题的网页
2. 点击Chrome工具栏中的插件图标
3. 在弹出的输入框中输入新的标题
4. 点击"确定"按钮或按Enter键
5. 标签页标题被修改，弹窗显示成功提示并自动关闭

## 3. 非功能需求

### 3.1 性能需求
- 插件启动时间：点击图标后，弹窗应在500ms内显示
- 标题修改响应时间：点击确定后，标题应在1秒内完成修改

### 3.2 兼容性需求
- 支持Chrome浏览器最新版本及前三个主要版本
- 适配不同操作系统下的Chrome浏览器（Windows、macOS、Linux）

### 3.3 安全需求
- 插件仅请求必要的权限（activeTab和scripting）
- 不收集或传输用户数据

## 4. 界面设计

### 4.1 插件图标
- 蓝色背景的"T"字图标，简洁明了
- 提供16px、48px和128px三种尺寸的SVG图标

### 4.2 弹出窗口
- 宽度：300px
- 包含标题、输入框和确定按钮
- 简洁的界面设计，突出输入框
- 成功提示信息显示在底部

## 5. 未来迭代计划

### 5.1 潜在功能扩展
- 保存历史修改记录，方便重复使用
- 添加标题模板功能
- 支持批量修改多个标签页的标题
- 添加快捷键支持

### 5.2 优先级排序
1. 添加快捷键支持
2. 保存历史修改记录
3. 添加标题模板功能
4. 支持批量修改功能